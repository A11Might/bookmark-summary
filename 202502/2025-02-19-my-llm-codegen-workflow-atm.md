# My LLM codegen workflow atm
- URL: https://harper.blog/2025/02/16/my-llm-codegen-workflow-atm/
- Added At: 2025-02-19 00:25:59
- [Link To Text](2025-02-19-my-llm-codegen-workflow-atm_raw.md)

## TL;DR
作者分享了使用大型语言模型（LLM）进行代码生成的工作流，涵盖新项目和现有项目的开发与迭代。通过构思、规划、执行和调试等步骤，LLM帮助生成代码、测试用例和文档，显著提升了开发效率。尽管存在失控风险、孤独感和时间管理等挑战，作者认为LLM在软件开发中的应用前景广阔，并期待未来更多协作工具的出现。

## Summary
1. **LLM代码生成工作流概述**：
   - 作者使用LLM（大型语言模型）进行代码生成，工作流包括构思、规划、执行和迭代。
   - 工作流适用于新项目（Greenfield）和现有项目的迭代（Legacy modern code）。

2. **Greenfield开发流程**：
   - **构思阶段**：
     - 使用对话式LLM（如ChatGPT 4o）逐步细化项目构思，生成详细的项目规格说明书（`spec.md`）。
     - 规格说明书可用于代码生成、白皮书撰写或商业模型生成。
   - **规划阶段**：
     - 将规格说明书传递给推理模型（如`o1*`、`o3*`、`r1`），生成详细的开发蓝图。
     - 蓝图分为多个小步骤，确保每个步骤都能通过测试驱动开发（TDD）或非TDD方式实现。
     - 生成`prompt_plan.md`和`todo.md`文件，用于后续代码生成和任务跟踪。
   - **执行阶段**：
     - 使用多种代码生成工具（如GitHub Workspace、Aider、Cursor、Claude Engineer等）执行生成的提示。
     - 作者偏好使用Claude和Aider进行配对编程，逐步实现每个提示中的代码。
     - 如果代码出现问题，使用Repomix工具进行调试。

3. **非Greenfield开发流程**：
   - **获取上下文**：
     - 使用Repomix工具从现有代码库中提取上下文，生成`output.txt`文件。
     - 通过LLM命令对`output.txt`进行转换，生成README、代码审查、GitHub问题等文档。
   - **迭代改进**：
     - 使用Claude或Aider逐步改进代码库，生成缺失的测试用例或修复代码问题。
     - 通过提示生成代码审查、GitHub问题或缺失的测试用例，逐步改进代码库。

4. **提示魔法**：
   - 作者分享了一些常用的提示模板，用于代码审查、GitHub问题生成和缺失测试生成。
   - 这些提示模板帮助作者快速深入现有代码库，进行代码改进和测试覆盖。

5. **工作流的挑战与反思**：
   - **失控风险**：作者提到在使用LLM时容易“失控”，建议通过规划步骤和测试来保持控制。
   - **孤独感**：LLM工作流通常是单人模式，作者希望未来能有多人协作的解决方案。
   - **时间管理**：LLM生成代码时会有等待时间，作者利用这段时间进行其他项目的构思或休闲活动。

6. **对LLM的批评与回应**：
   - 作者承认LLM存在争议，尤其是对环境的负面影响，但仍认为LLM在代码生成中的价值不可忽视。
   - 推荐Ethan Mollick的书籍《Co-Intelligence: Living and Working with AI》，帮助理解LLM的潜力。

7. **总结**：
   - 作者通过LLM代码生成工作流极大地提高了生产力，能够在短时间内完成大量项目。
   - 尽管存在挑战，作者认为LLM在软件开发中的应用前景广阔，并期待未来有更多协作工具的出现。
